<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>editbored - Markdown Editor with Link Previews</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container">
        <header>
            <input type="text" class="title-input" id="titleInput" placeholder="Document title" value="untitled document">
            <div class="actions">
                <button class="btn btn-secondary" id="resetBtn">New</button>
                <button class="btn btn-secondary" id="downloadBtn">Export .md</button>
            </div>
        </header>

        <!-- Toolbar -->
        <div class="toolbar" id="toolbar">
            <button class="toolbar-btn" data-format="bold" title="Bold (Ctrl+B)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
                    <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="italic" title="Italic (Ctrl+I)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="19" y1="4" x2="10" y2="4"></line>
                    <line x1="14" y1="20" x2="5" y2="20"></line>
                    <line x1="15" y1="4" x2="9" y2="20"></line>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="strikethrough" title="Strikethrough">
                <svg viewBox="0 0 20 20" fill="currentColor" height="16" width="16">
                    <path d="M5.83 7.435a4.11 4.11 0 01-.26-1.473 3.906 3.906 0 01.547-2.077A3.65 3.65 0 017.647 2.5a5.027 5.027 0 012.267-.489 4.888 4.888 0 012.837.8c.46.312.866.698 1.2 1.143a.79.79 0 01-.366 1.188 1.391 1.391 0 01-1.43-.457 3.435 3.435 0 00-.968-.674A3 3 0 008.7 4c-.37.171-.686.442-.912.782A2.132 2.132 0 007.441 6a2.299 2.299 0 00.454 1.441L5.83 7.435zM18 8.998H2a.9.9 0 100 1.799h8.4c.3.116.565.227.791.332.469.23.89.545 1.243.928a2.199 2.199 0 01.611 1.583c.005.478-.134.947-.4 1.345a2.74 2.74 0 01-1.068.938 3.243 3.243 0 01-2.9-.005 3.447 3.447 0 01-1.126-.928 4.062 4.062 0 01-.34-.5.951.951 0 10-1.632.975 5.666 5.666 0 002.344 2.043c.701.334 1.47.505 2.246.5a5.052 5.052 0 002.353-.562 4.48 4.48 0 001.743-1.578 4.136 4.136 0 00.653-2.288 3.628 3.628 0 00-.781-2.39 6.709 6.709 0 00-.351-.39h4.213a.902.902 0 000-1.802z"></path>
                </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="toolbar-btn" data-format="ul" title="Bullet List">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="8" y1="6" x2="21" y2="6"></line>
                    <line x1="8" y1="12" x2="21" y2="12"></line>
                    <line x1="8" y1="18" x2="21" y2="18"></line>
                    <circle cx="4" cy="6" r="1" fill="currentColor"></circle>
                    <circle cx="4" cy="12" r="1" fill="currentColor"></circle>
                    <circle cx="4" cy="18" r="1" fill="currentColor"></circle>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="ol" title="Numbered List">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="10" y1="6" x2="21" y2="6"></line>
                    <line x1="10" y1="12" x2="21" y2="12"></line>
                    <line x1="10" y1="18" x2="21" y2="18"></line>
                    <text x="3" y="8" font-size="8" fill="currentColor" stroke="none">1</text>
                    <text x="3" y="14" font-size="8" fill="currentColor" stroke="none">2</text>
                    <text x="3" y="20" font-size="8" fill="currentColor" stroke="none">3</text>
                </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="toolbar-btn" data-format="link" title="Insert Link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="image" title="Insert Image">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="code" title="Inline Code">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="16 18 22 12 16 6"></polyline>
                    <polyline points="8 6 2 12 8 18"></polyline>
                </svg>
            </button>
            <button class="toolbar-btn" data-format="codeblock" title="Code Block">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                    <polyline points="8 8 8 16"></polyline>
                    <polyline points="16 8 16 16"></polyline>
                    <line x1="10" y1="12" x2="14" y2="12"></line>
                </svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="toolbar-btn" data-format="quote" title="Quote">
                <span style="font-size: 16px; font-weight: bold;">"</span>
            </button>
            <div class="toolbar-divider"></div>
            <button class="toolbar-btn" data-format="mention" title="Mention (@)">
                <span style="font-size: 16px; font-weight: bold;">@</span>
            </button>
        </div>

        <!-- WYSIWYG Editor -->
        <div class="editor-wrapper">
            <div class="editor" id="editor" contenteditable="true" spellcheck="false"></div>
        </div>

        <details class="markdown-source">
            <summary>Show markdown source</summary>
            <pre id="sourceCode"></pre>
        </details>
    </div>

    <footer>
        <div class="status">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Ready</span>
        </div>
        <div class="word-count" id="wordCount">0 words | 0 characters</div>
    </footer>

    <div class="toast" id="toast"></div>

    <!-- Image Insertion Modal -->
    <div class="modal-overlay" id="imageModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Inserisci Immagine</h3>
                <button class="modal-close" id="modalCloseBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="image-option" id="uploadFromComputer">
                    <div class="image-option-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                    </div>
                    <div class="image-option-text">
                        <strong>Carica da computer</strong>
                        <span>Seleziona un file immagine</span>
                    </div>
                </div>
                <div class="image-divider">
                    <span>OPPURE</span>
                </div>
                <div class="image-url-section" id="imageUrlSection">
                    <label for="imageUrlInput">Inserisci URL immagine:</label>
                    <input type="url" id="imageUrlInput" placeholder="https://esempio.com/immagine.jpg">
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <button class="btn btn-primary" id="insertFromUrlBtn">Inserisci</button>
                        <button class="btn btn-secondary" id="cancelModalBtn">Annulla</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for image upload -->
    <input type="file" id="imageFileInput" accept="image/*" style="display: none;">

    <!-- Vendor Scripts -->
    <script>window.twttr = (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        js.async = true;
        fjs.parentNode.insertBefore(js, fjs);
        t._e = [];
        t.ready = function(f) {
            t._e.push(f);
        };
        return t;
    }(document, "script", "twitter-wjs"));</script>

    <script async src="https://www.instagram.com/embed.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="js/vendor/mentions.js"></script>

    <!-- Main Application Script -->
    <script src="js/app.js"></script>
</body>
</html>
